(function(){var t=null;var e=function(t,e){return function(){return t.apply(e,arguments)}};function i(){if(t){return t}else{t={add:e(this.addElement,this),clean:e(this.cleanItems,this),getItems:e(this.getItems,this),debug:e(this.debug,this)}}this.onScroll=e(this.onScroll,this);this.onResize=e(this.onResize,this);this.itemsLen=0;this.items=[];this.setDefaultVariables();return t}i.prototype.throttle=function(t){var e=true;return function(){if(e){t();e=false;setTimeout(function(){return e=true},150)}}};i.prototype.cleanItems=function(){this.items=[]};i.prototype.startListener=function(){window.addEventListener("scroll",this.throttle(this.onScroll));window.addEventListener("resize",this.throttle(this.onResize))};i.prototype.stopListeners=function(){window.removeEventListener("scroll",this.throttle(this.onScroll));window.removeEventListener("resize",this.throttle(this.onResize))};i.prototype.resetElementPosition=function(){var t;this.winHeight=window.innerHeight;for(var e=0,i=this.items.length;e<i;e++){t=this.items[e];t.pos=this.getElementPos(t)}this.checkVisibleItems()};i.prototype.getElementPos=function(t){var e=this.getScrollY();var i=t.el.getBoundingClientRect();return i[t.reference]+e-t.offset};i.prototype.getScrollY=function(){var t;if(typeof pageYOffset!=="undefined"){return pageYOffset}else{t=document.documentElement;t=t.clientHeight?t:document.body;return t.scrollTop}};i.prototype.onResize=function(){this.throttle(function(){if(this.winHeight!==window.innerHeight){this.resetElementPosition()}})};i.prototype.onScroll=function(){this.checkDocumentHeight();this.checkVisibleItems()};i.prototype.getItems=function(){return this.items};i.prototype.setDefaultVariables=function(){this.winHeight=window.innerHeight;this.lastPos=this.getScrollY();this.docHeight=document.body?document.body.offsetHeight:0};i.prototype.addElement=function(t){var e,i,s;if(!t.el){return}t.offset=typeof t.offset==="undefined"?200:t.offset;t.reference=t.reference||"top";t.pos=this.getElementPos(t);s=this.items.length;e=0;for(var o=0,n=this.items.length;o<n;o++){i=this.items[o];if(i.pos>t.pos){break}e++}this.items.splice(e,0,t);this.itemsLen=this.items.length;if(s===0){this.setDefaultVariables();this.startListener()}this.checkVisibleItems()};i.prototype.checkDocumentHeight=function(){var t=document.body.offsetHeight;if(this.docHeight!==t){this.docHeight=t;this.resetElementPosition()}};i.prototype.checkVisibleItems=function(){var t;var e=this.getScrollY();var i=this.winHeight+e;while(this.items.length){t=this.items[0];if(i>=t.pos){if(t.callback){t.callback()}this.items.shift();this.itemsLen=this.items.length}else{break}}this.lastPos=e;if(!this.items.length){this.stopListeners()}};i.prototype.debug=function(){var t,e,i;for(var s=0,o=this.items.length;s<o;s++){i=this.items[s];e=s%2?"red":"blue";t="2px dashed "+e;i.el.style["border"]=t;$("<div class='debug-line'>").css({top:i.pos,width:"100%",position:"absolute",borderTop:t}).appendTo("body")}};window.ScrollSpy=new i})();
//# sourceMappingURL=dist/scrollspy.min.map